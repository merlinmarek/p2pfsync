<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>p2pfsync: ip_address_list.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">p2pfsync
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ip_address_list.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ip__address__list_8h_source.html">ip_address_list.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="logger_8h_source.html">logger.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a141188ec360373b537f18284c3247d7d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip__address__list_8c.html#a141188ec360373b537f18284c3247d7d">find_entry</a> (<a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> **list, struct sockaddr *ip_address)</td></tr>
<tr class="separator:a141188ec360373b537f18284c3247d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da666208fa1b1aea036bb1b35923e51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip__address__list_8c.html#a7da666208fa1b1aea036bb1b35923e51">free_ip_address_list</a> (<a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> **list)</td></tr>
<tr class="memdesc:a7da666208fa1b1aea036bb1b35923e51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the memory an ip address list occupies given its head node.  <a href="#a7da666208fa1b1aea036bb1b35923e51">More...</a><br /></td></tr>
<tr class="separator:a7da666208fa1b1aea036bb1b35923e51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953797f069081e86d357740af9c5f986"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip__address__list_8c.html#a953797f069081e86d357740af9c5f986">get_best_address</a> (<a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> **list, struct sockaddr_storage *ip_address)</td></tr>
<tr class="memdesc:a953797f069081e86d357740af9c5f986"><td class="mdescLeft">&#160;</td><td class="mdescRight">This gets the best address out of an ip address list.  <a href="#a953797f069081e86d357740af9c5f986">More...</a><br /></td></tr>
<tr class="separator:a953797f069081e86d357740af9c5f986"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadd4a13845a9150e73113d423cd744ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip__address__list_8c.html#aadd4a13845a9150e73113d423cd744ae">add_or_update_entry</a> (<a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> **list, struct sockaddr *ip_address, struct timeval last_seen)</td></tr>
<tr class="memdesc:aadd4a13845a9150e73113d423cd744ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert an ip address into the list. If the ip is already in the list its timestamp is updated.  <a href="#aadd4a13845a9150e73113d423cd744ae">More...</a><br /></td></tr>
<tr class="separator:aadd4a13845a9150e73113d423cd744ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad55aef0685c6844d12bd0e49135394cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip__address__list_8c.html#ad55aef0685c6844d12bd0e49135394cb">print_ip_address_list</a> (<a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> **list)</td></tr>
<tr class="memdesc:ad55aef0685c6844d12bd0e49135394cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print out an ip address list given its head node using the logger module.  <a href="#ad55aef0685c6844d12bd0e49135394cb">More...</a><br /></td></tr>
<tr class="separator:ad55aef0685c6844d12bd0e49135394cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aadd4a13845a9150e73113d423cd744ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadd4a13845a9150e73113d423cd744ae">&#9670;&nbsp;</a></span>add_or_update_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_or_update_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> **&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr *&#160;</td>
          <td class="paramname"><em>ip_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>last_seen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insert an ip address into the list. If the ip is already in the list its timestamp is updated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>A pointer to the address where the head of the list resides </td></tr>
    <tr><td class="paramname">ip_address</td><td>The ip address to insert </td></tr>
    <tr><td class="paramname">last_seen</td><td>When was this ip last seen </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a141188ec360373b537f18284c3247d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a141188ec360373b537f18284c3247d7d">&#9670;&nbsp;</a></span>find_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a>* find_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> **&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr *&#160;</td>
          <td class="paramname"><em>ip_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7da666208fa1b1aea036bb1b35923e51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7da666208fa1b1aea036bb1b35923e51">&#9670;&nbsp;</a></span>free_ip_address_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_ip_address_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> **&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the memory an ip address list occupies given its head node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>A pointer to the address where the head of the list resides </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a953797f069081e86d357740af9c5f986"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a953797f069081e86d357740af9c5f986">&#9670;&nbsp;</a></span>get_best_address()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_best_address </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> **&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_storage *&#160;</td>
          <td class="paramname"><em>ip_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This gets the best address out of an ip address list. </p>
<p>For each discovered peer there is one ip address list. It contains all the address that belong to this peer. These might be many e.g. one link over ethernet, another over wifi, etc. and both IPv4 and IPv6. This function gives the "best" which in this case is the first IPv6 address. If no IPv6 address is found an IPv4 address is returned instead. If no address is found the function returns 0. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>A pointer to the address where the head of the list resides </td></tr>
    <tr><td class="paramname">ip_address</td><td>A pointer to a memory location where the "best" ip should be copied to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="ad55aef0685c6844d12bd0e49135394cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad55aef0685c6844d12bd0e49135394cb">&#9670;&nbsp;</a></span>print_ip_address_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_ip_address_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ip__address__list_8h.html#a6506d8197ff367988d8b9cf6ef876107">ip_address_entry_type</a> **&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print out an ip address list given its head node using the logger module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>A pointer to the address where the head of the list resides </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
